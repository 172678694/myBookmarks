<!DOCTYPE html>
<html lang="zh-Hans">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="./css/style.css">
</head>
<body>
	<header></header>
	<main>
		<div class="wrapper" id="main">		
		</div>
	</main>
	<footer></footer>

<script>
    //遍历数组，生成键盘 
    var keys={
    0:['q','w','e','r','t','y','u','i','o','p'],
    1:['a','s','d','f','g','h','j','k','l'],
    2:['z','x','c','v','b','n','m'],
	'length':3
	}
    var hash={
        'q':'www.qq.com',
        'w':'weibo.com',
        'e': 'ele.me',
        'r':'renren.com',
        't':'tianya.com',
        'y':'youtube.com',
        'u':'uc.com',
        'i':'www.iqiyi.com',
        'o':'opera.com',
        'p':undefined,
        'k':'36kr.com',
        'a':'www.amazon.com',
        's':'sohu.com',
        'z':'www.zhihu.com',
        'm':'www.mcdonalds.com.cn',
        'b':'bilibili.com',
        'j':'juejin.im',
        'c':'css-tricks.com',
        'f':'fonts.google.com',
        'g':'google.com',
        'h':'www.jianshu.com',
        'x':'xiedaimala.com',
        'a':'acfun.cn',
        't':'twitter.com'
        }
    var hashInLocalStorage = JSON.parse(localStorage.getItem('zzz')||'null')
    if(hashInLocalStorage){
        hash = hashInLocalStorage
    }	 
    var index = 0
    while(index < keys['length']){
		var div1=document.createElement('div')
        main.appendChild(div1)
        div1.className='row'
		var row=keys[index] //第一个数组 第二个数组 第三个数组
        var index2 = 0
        while(index2<row['length']){
            var kbd=document.createElement('kbd')            
            var span=document.createElement('span')
            var img=document.createElement('img')
            var button=document.createElement('button')

            kbd.className='key'
            span.className='text'
            span.textContent=row[index2]            
            button.textContent='编辑'
            button.id=row[index2]

            if(hash[row[index2]]){
                img.src='http://'+hash[row[index2]]+'/favicon.ico'
            }else{
                img.src='//i.loli.net/2018/12/26/5c23455f16201.png'
            }
            img.onerror=function(xxxx){
                xxxx.target.src='//i.loli.net/2018/12/26/5c23455f16201.png'
            }

            div1.appendChild(kbd)
            kbd.appendChild(span)
            kbd.appendChild(img)
            kbd.appendChild(button)
            index2=index2+1

            button.onclick=function(xxx){
                var button2=xxx['target']
                var key=button2['id']
                var x=prompt('输入一个新的网址')
                hash[key]=x  /*哈希变更*/
                var img2=button2.previousSibling
                img2.src='http://'+x+'/favicon.ico'
                img2.onerror=function(xxxx){                   
                xxxx.target.src='//i.loli.net/2018/12/26/5c23455f16201.png'
                }
                localStorage.setItem('zzz',JSON.stringify(hash))
            }
        }
        index=index+1
    }


	document.onkeypress = function(aaa){
        var key=aaa['key']
		var website=hash[key]
		 //location.href='http://'+ website
		window.open('http://'+ website,'_blank')
	}

    
</script>

</body>
</html>